\section{Introduction}\label{index_introduction}
The \doxyref{Cumbia\+Hdb}{p.}{classCumbiaHdb} module generates data hdbly or from a specified Java\+Script file. Data can be used to test higher level applications in terms of usability, performance and behaviour in case of errors.

The module can be used and introduced into your application as any other {\itshape engine}. It can be registered with Cumbia\+Pool/\+Cu\+Controls\+Factory\+Pool as in usual {\itshape multi engine} projects, and the concept of {\itshape source} is equivalent. The module is \char`\"{}$\ast$read only$\ast$\char`\"{} (only sources, no {\itshape targets}), and any {\itshape cumbia-\/qtcontrols} widget can be associated with a {\itshape cumbia-\/hdb source}.

The difference is that there is no connection to any control system.\section{Features}\label{index_features}
The sources supplied to the module determine how data is generated in terms of size, bounds and update period. Moreover, names can be used to determine thread grouping in case of multiple readers.\subsection{Examples}\label{index_examples}
In the examples below, we use the {\itshape cumbia read} command line client.\subsubsection{Read a hdbly generated scalar value}\label{index_read_scalar}

\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia read hdb:\textcolor{comment}{//one/hdb/number/1/0/100/one\_r }}
\end{DoxyCode}


The output will be\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{* one\_r: [14:02:45+0.648788]  [double] 59.72 }
\end{DoxyCode}


The source in the example is made up of several sections separated by a \textquotesingle{}/\textquotesingle{}\+:
\begin{DoxyItemize}
\item {\itshape hdb\+://} associates what follows to the {\itshape cumbia-\/hdb} module (through the Cumbia\+Pool and Cu\+Controls\+Factory\+Pool)
\item one/hdb/number an arbitrary name that is given to the hdb source. Everything that precedes the \textquotesingle{}/\textquotesingle{}-\/separated numeric section is interpreted as the source name.
\item first number\+: the size of the generated result
\item second number\+: the minimum value that can be generated
\item third number\+: the maximum value
\item {\itshape one\+\_\+r} a {\itshape label} that can be associated to the source name (optional). If present, it is displayed in the output at the beginning of the line
\end{DoxyItemize}\subsubsection{Read a hdbly generated vector of 3 values between -\/100 and 100}\label{index_read_array}

\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia read hdb:\textcolor{comment}{//a/hdb/array/3/-100/100/array\_3 }}
\end{DoxyCode}
 The output will be\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{* array\_3: [14:37:26+0.249328] [double,3] \{ 61.62,-35.80,-35.02 \} }
\end{DoxyCode}
\subsubsection{Monitor a hdbly generated vector of 3 values between -\/10 and +10 with a period of one second}\label{index_monitor_array}

\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia monitor hdb:\textcolor{comment}{//one/hdb/array/3/-10/10/monitor\_a\_3 }}
\end{DoxyCode}
 The output will be\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{* monitor started: press any key to exit}
\DoxyCodeLine{  monitor\_a\_3: [14:39:16+0.627573] [double,3] \{ 8.11,3.82,-4.99 \}}
\DoxyCodeLine{  monitor\_a\_3: [14:39:16+0.627634] [double,3] \{ 0.53,6.21,-8.98 \}}
\DoxyCodeLine{  monitor\_a\_3: [14:39:17+0.627987] [double,3] \{ 1.39,-5.77,-6.22 \}}
\DoxyCodeLine{  monitor\_a\_3: [14:39:18+0.628198] [double,3] \{ -6.17,-8.67,-9.01 \}}
\DoxyCodeLine{  monitor\_a\_3: [14:39:19+0.628415] [double,3] \{ 1.48,7.36,9.45 \}}
\DoxyCodeLine{  [...]}
\end{DoxyCode}


A monitor is stopped whenever a key is pressed. Avoid {\itshape C\+T\+R\+L-\/C} for proper termination.\subsubsection{Monitor three hdbly generated vectors of 3 values each, with a period of one second}\label{index_monitor_3_arrays}

\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia monitor hdb:\textcolor{comment}{//a/hdb/array/3/-10/10/a\_3  hdb://b/hdb/array/3/-12/12/b\_3}}
\DoxyCodeLine{    hdb:\textcolor{comment}{//c/hdb/array/3/-100/100/c\_3  }}
\end{DoxyCode}
 The output will be\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{monitor started: press any key to exit}
\DoxyCodeLine{a\_3: [14:42:49+0.430095] [double,3] \{ 7.75,-1.79,4.73 \}}
\DoxyCodeLine{a\_3: [14:42:49+0.430147] [double,3] \{ -2.53,-2.72,1.63 \}}
\DoxyCodeLine{b\_3: [14:42:49+0.431249] [double,3] \{ 8.37,10.42,-9.41 \}}
\DoxyCodeLine{b\_3: [14:42:49+0.431287] [double,3] \{ 9.46,4.48,5.46 \}}
\DoxyCodeLine{c\_3: [14:42:49+0.431744] [double,3] \{ -16.46,-64.88,-15.70 \}}
\DoxyCodeLine{c\_3: [14:42:49+0.431785] [double,3] \{ 68.69,1.35,20.00 \}}
\DoxyCodeLine{a\_3: [14:42:50+0.430501] [double,3] \{ -5.11,4.62,-2.32 \}}
\DoxyCodeLine{b\_3: [14:42:50+0.43159] [double,3] \{ 11.27,6.16,0.61 \}}
\DoxyCodeLine{c\_3: [14:42:50+0.432018] [double,3] \{ -52.93,19.59,64.50 \}}
\DoxyCodeLine{a\_3: [14:42:51+0.430715] [double,3] \{ -1.04,1.17,2.77 \}}
\DoxyCodeLine{b\_3: [14:42:51+0.431767] [double,3] \{ 2.43,8.20,6.89 \}}
\DoxyCodeLine{c\_3: [14:42:51+0.432161] [double,3] \{ -59.39,-99.55,67.54 \}}
\end{DoxyCode}


Now take the last example and fetch some extra information, by adding --l=medium to the command line. The output will be more detailed\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{[...]}
\DoxyCodeLine{  a\_3: -10.00 < [14:45:32+0.47847] [double,3] \{ -5.78,-0.14,-5.87 \} [hdb:\textcolor{comment}{//a/hdb/array/3/-10/10/a\_3] < 10.00 [in 30us]}}
\DoxyCodeLine{  b\_3: -12.00 < [14:45:32+0.478849] [double,3] \{ -8.28,-1.76,-8.73 \} [hdb:\textcolor{comment}{//b/hdb/array/3/-12/12/b\_3] < 12.00 [in 19us]}}
\DoxyCodeLine{  c\_3: -100.00 < [14:45:32+0.479327] [double,3] \{ 89.96,-66.21,-37.81 \} [hdb:\textcolor{comment}{//c/hdb/array/3/-100/100/c\_3] < 100.00 [in 26us]}}
\DoxyCodeLine{  [...] }
\end{DoxyCode}


The output encloses the read value between upper and lower bounds, shows the full source name and the execution time.\subsubsection{Thread grouping}\label{index_thread_grouping}
The {\itshape cumbia-\/hdb} module takes the first section of the source string delimited by \textquotesingle{}/\textquotesingle{} to determine how to group number generator threads together. Add the --l=high option to get even more detailed information while reading\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia read hdb:\textcolor{comment}{//th1/scalar/1/-10.0/10.2/r1  hdb://th2/array/2/0.0/10.0/r2  hdb://th1/array/3/-10.0/10.0/r3}}
\DoxyCodeLine{       --l=high}
\end{DoxyCode}


Output\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{r1: [th1] -10.00 < [14:50:56+0.0891559]  [double] 10.10 [hdb:\textcolor{comment}{//th1/scalar/1/-10.0/10.2/r1] < 10.20 [in 50us]}}
\DoxyCodeLine{r2: [th2] 0.00 < [14:50:56+0.0895171] [double,2] \{ 5.05,7.84 \} [hdb:\textcolor{comment}{//th2/array/2/0.0/10.0/r2] < 10.00 [in 39us]}}
\DoxyCodeLine{r3: [th1] -10.00 < [14:50:56+0.0900221] [double,3] \{ 6.04,-4.54,8.10 \} [hdb:\textcolor{comment}{//th1/array/3/-10.0/10.0/r3] < 10.00 [in 25us]}}
\end{DoxyCode}


After the labels, r1, r2, r3, {\itshape thread information} is shown between square brackets. As you can see, the {\itshape th1} and {\itshape th2} sections in the source names have been used to execute the three readings in two threads grouped by name.\subsubsection{Java\+Script generated data}\label{index_js_gen}
A {\itshape cumbia-\/hdb} source can specify a Java\+Script file (name ending in $\ast$.js) as data provider. The {\itshape pattern} for the source must be\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{hdb:\textcolor{comment}{//anything/you/want/file://path/to/file.js/SIZE/MIN/MAX[/PERIOD]/label}}
\end{DoxyCode}


file.\+js will be passed the four arguments given in the source name (period is optional, default is 1 second) plus two additional parameters\+: the number of calls made to the function up to that moment and the value from the last call.

For example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia monitor  hdb:\textcolor{comment}{//file://js\_functions/sin.js/100/-10/10/sin\_f}}
\end{DoxyCode}
 will produce the following output


\begin{DoxyCode}{0}
\DoxyCodeLine{monitor started: press any key to exit}
\DoxyCodeLine{sin\_f: [15:03:20+0.105853] [double,100] \{ -0.00,-2.19,-4.17,-5.73,-6.74,-7.09,-6.74,-5.73,-4.17,-2.19,-0.00,2.19,4.17,5.73,6.74,7.09,6.74,5.73,4.17,2.19,0.00,-2.19,-4.17,-5.73,-6.774,-5.73,-4.17,-2.19,-0.00,2.19,4.17,5.73,6.74,7.09,6.74,5.73,4.17,2.19,0.00,-2.19,-4.17,-5.73,-6.74,-7.09,-6.74,-5.73,-4.17,-2.19,-0.00,2.19,4.17,5.73,6.74,7.09,6.74,5.73,4.17,2.19,04.17,-5.73,-6.74,-7.09,-6.74,-5.73,-4.17,-2.19,-0.00,2.19,4.17,5.73,6.74,7.09,6.74,5.73,4.17,2.19,0.00,-2.19,-4.17,-5.73,-6.74,-7.09,-6.74,-5.73,-4.17,-2.19,-0.00,2.19,4.17,5.73,6.74,.73,4.17,2.19 \}}
\DoxyCodeLine{sin\_f: [15:03:20+0.105985] [double,100] \{ -0.00,-1.89,-3.59,-4.94,-5.81,-6.11,-5.81,-4.94,-3.59,-1.89,-0.00,1.89,3.59,4.94,5.81,6.11,5.81,4.94,3.59,1.89,0.00,-1.89,-3.59,-4.94,-5.881,-4.94,-3.59,-1.89,-0.00,1.89,3.59,4.94,5.81,6.11,5.81,4.94,3.59,1.89,0.00,-1.89,-3.59,-4.94,-5.81,-6.11,-5.81,-4.94,-3.59,-1.89,-0.00,1.89,3.59,4.94,5.81,6.11,5.81,4.94,3.59,1.89,03.59,-4.94,-5.81,-6.11,-5.81,-4.94,-3.59,-1.89,-0.00,1.89,3.59,4.94,5.81,6.11,5.81,4.94,3.59,1.89,0.00,-1.89,-3.59,-4.94,-5.81,-6.11,-5.81,-4.94,-3.59,-1.89,-0.00,1.89,3.59,4.94,5.81,.94,3.59,1.89 \}}
\end{DoxyCode}


To see a plot of the sin function, you would rather issue the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia client  hdb:\textcolor{comment}{//file://js\_functions/sin.js/100/-10/10/sin\_f}}
\end{DoxyCode}
  
\begin{DoxyImage}
\includegraphics[width=10cm]{cumbia_client_sin.png}
\doxyfigcaption{cumbia client}
\end{DoxyImage}


In the example, the working directory contains a file named {\itshape sin.\+js} under the {\itshape js\+\_\+functions} folder. An absolute path can be specified as well


\begin{DoxyCode}{0}
\DoxyCodeLine{cumbia monitor hdb:\textcolor{comment}{//file:///home/giacomo/devel/utils/git/cppqtclients/cumbia-libs/qumbia-apps/qumbia-reader/js\_functions/sin.js/100/0/1}}
\end{DoxyCode}
\subsection{Further reading}\label{index_further_reading}
The {\texttt{ cumbia read}} command line client with bash auto completion functionality. The {\texttt{ cumbia client}} Qt graphical client with bash auto completion functionality.\section{Including the module in a cumbia application}\label{index_include_module}
Just a few lines of code are necessary to integrate the {\itshape cumbia-\/hdb} module in your graphical application. Presently, you will be able to take advantage of the testing features provided by the module.\subsection{Using pkg-\/config file}\label{index_pkg_config}
A {\itshape cumbia-\/hdb.\+pc} {\itshape pkg-\/config} file is distributed under the {\itshape I\+N\+S\+T\+A\+L\+L\+\_\+\+R\+O\+O\+T/lib/pkgconfig} directory. It can be used to include {\itshape cumbia-\/hdb} in your project.\subsection{Through the Qt pro file}\label{index_qt_pro}
For Qt applications, adding the following lines to the Qt {\itshape project file} (.pro) is enough\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{exists(\$\$\{INSTALL\_ROOT\}/include/cumbia-hdb/cumbia-hdb.pri) \{}
\DoxyCodeLine{  include(\$\$\{INSTALL\_ROOT\}/include/cumbia-hdb/cumbia-hdb.pri)}
\DoxyCodeLine{\}}
\end{DoxyCode}
\subsection{Modify the main class $<$em$>$cpp$<$/em$>$ file}\label{index_cpp_file}
Cumbia\+Pool and Cu\+Controls\+Factory\+Pool objects are necessary when your application is required to support multiple engines. If the project is generated with the {\itshape cumbia new project} tool and the {\itshape multiple engine support} option is chosen, then you only need to add the following lines to the main class {\itshape cpp file}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifdef CUMBIA\_HDB\_VERSION}}
\DoxyCodeLine{\textcolor{preprocessor}{   \#include <cumbiahdb.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{   \#include <cumbiahdbworld.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{ \#ifdef CUMBIA\_HDB\_VERSION}}
\DoxyCodeLine{    CumbiaHdb *cura = \textcolor{keyword}{new} CumbiaHdb(\textcolor{keyword}{new} CuThreadFactoryImpl(), \textcolor{keyword}{new} QThreadsEventBridgeFactory());}
\DoxyCodeLine{    CumbiaHdbWorld hdbw;}
\DoxyCodeLine{    cu\_pool->registerCumbiaImpl(\textcolor{stringliteral}{"hdb"}, cura);}
\DoxyCodeLine{    m\_ctrl\_factory\_pool.registerImpl(\textcolor{stringliteral}{"hdb"}, CuHdbReaderFactory());}
\DoxyCodeLine{    m\_ctrl\_factory\_pool.setSrcPatterns(\textcolor{stringliteral}{"hdb"}, hdbw.srcPatterns());}
\DoxyCodeLine{    cu\_pool->setSrcPatterns(\textcolor{stringliteral}{"hdb"}, hdbw.srcPatterns());}
\DoxyCodeLine{    cura->getServiceProvider()->registerService(CuServices::Log, \textcolor{keyword}{new} CuLog(\&m\_log\_impl));}
\DoxyCodeLine{\textcolor{preprocessor}{ \#endif}}
\end{DoxyCode}


in complete analogy with any other multi engine project, that, for instance, requires support for {\itshape Tango} and {\itshape E\+P\+I\+CS}.

\begin{DoxyParagraph}{Notes}

\begin{DoxyItemize}
\item {\itshape cu\+\_\+pool} is a pointer to a Cumbia\+Pool object
\item {\itshape m\+\_\+ctrl\+\_\+factory\+\_\+pool} is a private attribute of the main class, type Cu\+Controls\+Factory\+Pool
\item {\itshape m\+\_\+log\+\_\+impl} is a log implementation
\item {\itshape \doxyref{Cu\+R\+N\+D\+Reader\+Factory}{p.}{classCuHdbReaderFactory}} is a factory that instantiates hdb readers
\item the {\itshape set\+Src\+Patterns} methods register sources starting with the {\itshape hdb\+://} prefix with the {\itshape cumbia-\/hdb} module.
\end{DoxyItemize}
\end{DoxyParagraph}
To comply with the given implementation, the main class will have these attributes 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{private}:}
\DoxyCodeLine{   CumbiaPool *cu\_pool;}
\DoxyCodeLine{   QuLogImpl m\_log\_impl;}
\DoxyCodeLine{   CuLog *m\_log;}
\DoxyCodeLine{   CuControlsFactoryPool m\_ctrl\_factory\_pool;}
\end{DoxyCode}


The {\texttt{ cumbia read}} and the {\texttt{ cumbia client}} apps are examples of multi-\/engine integration including {\itshape cumbia-\/hdb}. 